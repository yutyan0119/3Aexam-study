# 分散システムまとめ

# 第1回
- クライアントサーバーシステムの欠点
  - サーバーへの負荷が大きい
  - サーバーから遠いと遅い
  - ネットワークへの負荷が集中

- CDN
  - サーバーを地理的に分散させる
    - 負荷減少
    - スループット向上
    - 負荷分散

- 人検知モデルのデータベース記録
  - 画像を送信してサーバーで検知
    - トラフィック多
    - 画質を下げると検知率低下
  - 検知をカメラ内で行って有無を送信
    - トラフィック少
    - 良い検知性能

# 第2回

- データの集合（DataSet）
  - Query
    - データの検索
- dataとqueryの関係
  - $R=QD=DQ$
    - DBMSはDに対してQを投げるとQDが得られる
      - 普通の検索
    - DSMS(DataStream Management System)はQに対してDを投げるとDQが得られる
      - メールの迷惑フィルタ・ラジオなど


# 第3回

- ネットワークとルーティング
  - 逐次法
    - 1つずつqueryと一致するか確かめる
  - 二分木
  
  - 実際のネットワーク
    - 複数のリンクがルータに繋がっている
    - 上下関係を持たない場合もある
    - グラフの中に閉路がある

- 経路の広告とパケットの配送
  - ノードからメッセージを送るように広告が来る
    - 発生するパケットが送られてくる

- Content Based PubSub Network
  - 欲しいコンテンツの条件をネットワークに登録すると、マッチするデータが送られてくるネットワークシステム

# 第4回(TCP/IP)

ホストA上に実装された関数をホストXから呼び出したい。

**Remote Procedure Call/RPC**あるいは**Remote Method Invocation/RMI**と呼ぶ。

ホスト間のメッセージの構造とデータ単位

| メッセージヘッダ | メッセージの交換に必要な情報（Content長/種類など） |
| ---------------- | -------------------------------------------------- |
| メッセージ本体   | 本体                                               |

アプリケーション間でやり取りされるデータ単位をApplication Protocol Data Unit (APDU)

以下の性質を持つ通信路が必要
1. APDUが届いたことを確認できる通信路
2. APDUが壊れないことを保証する通信路
   1. 順番が入れ替わらない
   2. 欠損しない
   3. 重複しない
3. 他者の通信に極端なダメージを与えず、適切なスループットを提供する

→TCPの役割がコレ

APDU -> TPDU(TCP/UDP) -> NPDU(IP) -> DPDU(MAC)

## 層アーキテクチャ
| 人                 |          | 人                 |
| ------------------ | -------- | ------------------ |
| Interface          |          | Interface          |
| アプリケーション層 | Protocol | アプリケーション層 |
| Interface          |          | Interface          |
| トランスポート層   | Protocol | トランスポート層   |
| Interface          |          | Interface          |
| データリンク層     |          | データリンク層     |
| Interface          |          | Interface          |
| 物理層             |          | 物理層             |

※TCP…順序性・信頼性を追加する
※IP…1500Byte程度に分割されたパケットをベストエフォートで届ける

# 第5/6回(Load Balancing)

